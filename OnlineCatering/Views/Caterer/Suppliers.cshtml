@model IEnumerable<OnlineCatering.Models.Supplier>

@{
    ViewData["Title"] = "Suppliers";
}

<div class="container py-4">
    <h1 class="mb-4">Suppliers</h1>

    <div class="d-flex justify-content-between align-items-center mb-3">
        <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addSupplierModal">Add New Supplier</button>

    </div>

    <div class="table-responsive">
        <table class="table table-striped table-bordered align-middle">
            <thead class="table-dark">
                <tr>
                    <th>@Html.DisplayNameFor(m => m.Name)</th>
                    <th>@Html.DisplayNameFor(m => m.Address)</th>
                    <th>@Html.DisplayNameFor(m => m.Pincode)</th>
                    <th>@Html.DisplayNameFor(m => m.Phone)</th>
                    <th>@Html.DisplayNameFor(m => m.Mobile)</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td>@item.Name</td>
                        <td>@item.Address</td>
                        <td>@item.Pincode</td>
                        <td>@item.Phone</td>
                        <td>@item.Mobile</td>
                        <td>
                            <div class="d-flex gap-2 flex-wrap">
                                <button class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#editModal-@item.SupplierId">Edit</button>
                                <button class="btn btn-sm btn-info text-white" data-bs-toggle="modal" data-bs-target="#detailsModal-@item.SupplierId">Details</button>
                                <button class="btn btn-sm btn-danger" data-bs-toggle="modal" data-bs-target="#deleteModal-@item.SupplierId">Delete</button>
                            </div>
                        </td>
                    </tr>

                    <!-- Edit Modal -->
                    <div class="modal fade" id="editModal-@item.SupplierId" tabindex="-1">
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                                <form asp-action="editSupplier" method="post">
                                    <div class="modal-header bg-primary text-white">
                                        <h5 class="modal-title">Edit Supplier</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                                    </div>
                                    <div class="modal-body">
                                        <input type="hidden" name="SupplierId" value="@item.SupplierId" />
                                        <div class="mb-3">
                                            <label class="form-label">Name</label>
                                            <input name="Name" class="form-control" value="@item.Name" required />
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Address</label>
                                            <input name="Address" class="form-control" value="@item.Address" required />
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Pincode</label>
                                            <input name="Pincode" class="form-control" value="@item.Pincode" required />
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Phone</label>
                                            <input name="Phone" class="form-control" value="@item.Phone" />
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Mobile</label>
                                            <input name="Mobile" class="form-control" value="@item.Mobile" />
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="submit" class="btn btn-success">Save Changes</button>
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <!-- Add Supplier Modal -->
                    <div class="modal fade" id="addSupplierModal" tabindex="-1">
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                                <form asp-action="addSuppliers" method="post">
                                    <div class="modal-header bg-success text-white">
                                        <h5 class="modal-title">Add New Supplier</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                                    </div>
                                    <div class="modal-body">
                                        <div class="mb-3">
                                            <label class="form-label">Name</label>
                                            <input name="Name" class="form-control" required />
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Address</label>
                                            <input name="Address" class="form-control" required />
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Pincode</label>
                                            <input name="Pincode" class="form-control" required />
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Phone</label>
                                            <input name="Phone" class="form-control" />
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Mobile</label>
                                            <input name="Mobile" class="form-control" />
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="submit" class="btn btn-success">Add Supplier</button>
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>


                    <!-- Details Modal -->
                    <div class="modal fade" id="detailsModal-@item.SupplierId" tabindex="-1">
                        <div class="modal-dialog modal-dialog-centered modal-lg">
                            <div class="modal-content">
                                <div class="modal-header bg-info text-white">
                                    <h5 class="modal-title">Supplier Details</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                                </div>
                                <div class="modal-body">
                                    <dl class="row">
                                        <dt class="col-sm-3">Name</dt>
                                        <dd class="col-sm-9">@item.Name</dd>

                                        <dt class="col-sm-3">Address</dt>
                                        <dd class="col-sm-9">@item.Address</dd>

                                        <dt class="col-sm-3">Pincode</dt>
                                        <dd class="col-sm-9">@item.Pincode</dd>

                                        <dt class="col-sm-3">Phone</dt>
                                        <dd class="col-sm-9">@item.Phone</dd>

                                        <dt class="col-sm-3">Mobile</dt>
                                        <dd class="col-sm-9">@item.Mobile</dd>
                                    </dl>
                                </div>
                                <div class="modal-footer">
                                    <button class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Delete Modal -->
                    <div class="modal fade" id="deleteModal-@item.SupplierId" tabindex="-1">
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                                <form asp-action="DeleteSupplier" asp-route-id="@item.SupplierId" method="post">
                                    <input type="hidden" name="SupplierId" value="@item.SupplierId" />
                                    <div class="modal-header bg-danger text-white">
                                        <h5 class="modal-title">Confirm Delete</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                                    </div>
                                    <div class="modal-body">
                                        <p>Are you sure you want to delete <strong>@item.Name</strong>?</p>
                                        <ul class="list-group">
                                            <li class="list-group-item"><strong>Address:</strong> @item.Address</li>
                                            <li class="list-group-item"><strong>Pincode:</strong> @item.Pincode</li>
                                            <li class="list-group-item"><strong>Phone:</strong> @item.Phone</li>
                                            <li class="list-group-item"><strong>Mobile:</strong> @item.Mobile</li>
                                        </ul>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="submit" class="btn btn-danger">Yes, Delete</button>
                                        <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                }
            </tbody>
        </table>
    </div>
</div>

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
}

@model IEnumerable<OnlineCatering.Models.Supplier>

@{
    ViewData["Title"] = "Suppliers";
}

<h1>Suppliers</h1>

<p>
    <a asp-action="addSuppliers" class="btn btn-primary">Create New</a>
</p>

<table class="table table-striped">
    <thead>
        <tr>
            <th>@Html.DisplayNameFor(m => m.Name)</th>
            <th>@Html.DisplayNameFor(m => m.Address)</th>
            <th>@Html.DisplayNameFor(m => m.Pincode)</th>
            <th>@Html.DisplayNameFor(m => m.Phone)</th>
            <th>@Html.DisplayNameFor(m => m.Mobile)</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>@Html.DisplayFor(m => item.Name)</td>
                <td>@Html.DisplayFor(m => item.Address)</td>
                <td>@Html.DisplayFor(m => item.Pincode)</td>
                <td>@Html.DisplayFor(m => item.Phone)</td>
                <td>@Html.DisplayFor(m => item.Mobile)</td>
                <td>
                    <!-- Edit button triggers Edit modal -->
                    <button type="button" class="btn btn-sm btn-info" data-bs-toggle="modal" data-bs-target="#editModal-@item.SupplierId">
                        Edit
                    </button> |

                    <!-- Details Button triggers modal -->
                    <button type="button" class="btn btn-sm btn-secondary" data-bs-toggle="modal" data-bs-target="#detailsModal-@item.SupplierId">
                        Details
                    </button> |

                    <!-- Delete Button triggers modal -->
                    <button type="button" class="btn btn-sm btn-danger" data-bs-toggle="modal" data-bs-target="#deleteModal-@item.SupplierId">
                        Delete
                    </button>

                    <!-- Edit Modal -->
                    <div class="modal fade" id="editModal-@item.SupplierId" tabindex="-1" aria-labelledby="editModalLabel-@item.SupplierId" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header bg-info text-white">
                                    <h5 class="modal-title" id="editModalLabel-@item.SupplierId">Edit Supplier</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>

                                <div class="modal-body">
                                    <form asp-action="editSupplier" method="post">
                                        <input type="hidden" name="SupplierId" value="@item.SupplierId" />

                                        <div class="mb-3">
                                            <label for="Name-@item.SupplierId" class="form-label">Name</label>
                                            <input type="text" id="Name-@item.SupplierId" name="Name" class="form-control" value="@item.Name" />
                                            <span class="text-danger">@Html.ValidationMessage("Name")</span>
                                        </div>

                                        <div class="mb-3">
                                            <label for="Address-@item.SupplierId" class="form-label">Address</label>
                                            <input type="text" id="Address-@item.SupplierId" name="Address" class="form-control" value="@item.Address" />
                                            <span class="text-danger">@Html.ValidationMessage("Address")</span>
                                        </div>

                                        <div class="mb-3">
                                            <label for="Pincode-@item.SupplierId" class="form-label">Pincode</label>
                                            <input type="text" id="Pincode-@item.SupplierId" name="Pincode" class="form-control" value="@item.Pincode" />
                                            <span class="text-danger">@Html.ValidationMessage("Pincode")</span>
                                        </div>

                                        <div class="mb-3">
                                            <label for="Phone-@item.SupplierId" class="form-label">Phone</label>
                                            <input type="text" id="Phone-@item.SupplierId" name="Phone" class="form-control" value="@item.Phone" />
                                            <span class="text-danger">@Html.ValidationMessage("Phone")</span>
                                        </div>

                                        <div class="mb-3">
                                            <label for="Mobile-@item.SupplierId" class="form-label">Mobile</label>
                                            <input type="text" id="Mobile-@item.SupplierId" name="Mobile" class="form-control" value="@item.Mobile" />
                                            <span class="text-danger">@Html.ValidationMessage("Mobile")</span>
                                        </div>

                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                            <button type="submit" class="btn btn-primary">Save changes</button>
                                        </div>
                                    </form>
                                </div>


                            </div>
                        </div>
                    </div>
                    <!-- End Edit Modal -->
                    <!-- Details Modal -->
                    <div class="modal fade" id="detailsModal-@item.SupplierId" tabindex="-1" aria-labelledby="detailsModalLabel-@item.SupplierId" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered modal-lg">
                            <div class="modal-content">
                                <div class="modal-header bg-primary text-white">
                                    <h5 class="modal-title" id="detailsModalLabel-@item.SupplierId">Supplier Details</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <dl class="row">
                                        <dt class="col-sm-3">Name</dt>
                                        <dd class="col-sm-9">@item.Name</dd>

                                        <dt class="col-sm-3">Address</dt>
                                        <dd class="col-sm-9">@item.Address</dd>

                                        <dt class="col-sm-3">Pincode</dt>
                                        <dd class="col-sm-9">@item.Pincode</dd>

                                        <dt class="col-sm-3">Phone</dt>
                                        <dd class="col-sm-9">@item.Phone</dd>

                                        <dt class="col-sm-3">Mobile</dt>
                                        <dd class="col-sm-9">@item.Mobile</dd>
                                    </dl>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- End Details Modal -->
                    <!-- Delete Confirmation Modal -->
                    <div class="modal fade" id="deleteModal-@item.SupplierId" tabindex="-1" aria-labelledby="deleteModalLabel-@item.SupplierId" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header bg-danger text-white">
                                    <h5 class="modal-title" id="deleteModalLabel-@item.SupplierId">Confirm Delete</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>

                                <div class="modal-body">
                                    <p>Are you sure you want to delete this supplier?</p>
                                    <ul class="list-group">
                                        <li class="list-group-item"><strong>Name:</strong> @item.Name</li>
                                        <li class="list-group-item"><strong>Address:</strong> @item.Address</li>
                                        <li class="list-group-item"><strong>Pincode:</strong> @item.Pincode</li>
                                        <li class="list-group-item"><strong>Phone:</strong> @item.Phone</li>
                                        <li class="list-group-item"><strong>Mobile:</strong> @item.Mobile</li>
                                    </ul>
                                </div>

                                <div class="modal-footer">
                                    <form asp-action="DeleteSupplier" asp-route-id="@item.SupplierId" method="post">
                                        <input type="hidden" name="SupplierId" value="@item.SupplierId" />
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                        <button type="submit" class="btn btn-danger">Delete</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- End Delete Modal -->
                </td>
            </tr>
        }
    </tbody>
</table>
